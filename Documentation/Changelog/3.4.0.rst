3.4.0
=====

Breaking
--------

Nothing

Features
--------

* Adjust TYPO3 page cache timeout based on rendered dates.
  Will use one of the following:

  - end time of each rendered date

  - start time of each rendered date (if upcoming is enabled)

  - midnight (if midnight is configured)

  The lowest date will be used to calculate the maximum time to life for the page cache.
  This is compared to the already calculated time to life.
  The lower value is then used by TYPO3.

  That allows visitors to always see the next dates.

* Add ``upcoming`` setting for dates.

  The option can be set to ``0`` (default) or ``1``.
  ``0`` behaves the same way as in the past.
  ``1`` turns off the option ``useMidnight``, ``start`` and ``end``.
  Only dates with a start date in the future will be shown.

* Handle changes to images for events.
  The import of destination data one only added new images but kept existing images untouched.
  This was now improved. The import now will update, remove and re-sort images as well.

Fixes
-----

* Do not delete files if they are still in use.
  The clean up task had an issue to clean up to many files.
  It didn't check if a file that could be deleted because one event got deleted,
  was still in use by another event.

Tasks
-----

Nothing

Deprecation
-----------

Nothing
